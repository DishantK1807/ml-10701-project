Pragmatic sensitivity in NL interfaces and the structure of conversation Tom Wachtel Scicon Ltd, London and Research Unit for Information Science & AI, Hamburg University i.
Introduction The work reported here is being conducted as part of the LOKI project (ESPRIT Project I07, "A legio oriented approach to knowledge and data bases supporting natural user interaction").
The goal of the NL part of the project is to build a pragmatically sensitive natural language interface to a knowledge base.
By "pragmatically sensitive", we mean that the system should not only produce well-formed coherent and cohesive language (a minimum requirement of any NL system designed to handle discourse), but should also be sensitive to those aspects o~ user behaviour that humans are sensitive %o over and above simply providing a good response, including producing output that is appropriately decorated with those minor and semantically inconsequential elements of language that make the difference between natural language and natural natural language.
This paper concentrates on the representation of the structure of conversation in our system.
We will first outline ~he representation we use for dialogue moves, and then outline the nature of the definition of well-formed dialogue that we are operating with.
Finally, we will note a few extensions to the representation mechanism.
2. The HOVE frame We are assuming a seven-slot frame for the representation of moves within a dialogue, with the following slots: HOVE, USER, AGENT, TURN, ACT~ BASE, CONT.
Every move in a conversation is represented by such a frame.
The HOVE slot uniquely idenitifies a particular move in the conversation by an arbitrary integer.
The USER slot identifies the oucrent user of the system.
The AGENT slot specifies whether it i~ a user move o~' a system move.
The TURN slot has the value OPEN n or CLOSE n, where n is a number that refers to a particular exchange.
Typically, a move with a value OPEN n for the TURN slot might be a request, and one with a CLOSE n value the c~orresponding response.
The ACT slot specifies what act is performed by the utterance.
This will be either a speech act, or the value ACTION, since not all moves need be speech acts.
The range of speech acts that the system will have to reoognise or' produce is clearly smaller than that which occurs in conversations between humans.
Furthermore, certain speech acts will be of primary importance given the domain of application of the system, namely, as a front end to an expert system.
We have therefore produced an initial hierarchy of potentially relevant speech acts (Waehtel 1985a), where the major classification is into requests, assertions and commentaries.
Some of these are referred to below.
Many of the speech acts we use go one level below what is traditionally viewed as a speech act (i.e.
in the sense of Austin (~952), Searle (1969), etc).
and may be compared with distinctions that McKeown (1985: 9ff.), for example, discusses under the category of "rhetorical predicates", though they are by no means the same.
The only speech acts discussed below a~e referred to by the following abbreviations: REQACT request-for-action REQAFF request-for-affipmation SUPPAFF supply-of-affirmation REQCONST request-for-constant SUPPCONST supply-of-constant REQCONF request-for-confirmation SUPPCONF supply-of-confirmation The BASE slot specifies the current topic, in the very restricted sense cf a pointer to the node in the ~emantic network that corresponds to the object what the current exchange is about.
This simplistic view of topic is adopted here as a first step only, and serves to i~lustrate the points discussed below.
The CONT slot specifies the semantic representation of the utterance, and we envisage using the same representation for semantics and for actions, so that all possible ACT types can be represented uniformly in the CONT slot.
In particular, we will define an exchange as a pair of utterances with the same value for the CONT slot, for the time being.
This is of course too strict.
Other functions specifying 35 "local coherence" in the sense of Hobbs (1982: 227) are also relevant here.
The particular illooutionary force of an utterance will be a function of the value of the ACT slot and the CONT slot.
Subdialogues that are not in the mainstream of the conversation will be identified by particular relationship of values for the TURN slot between adjacent moves, enhanced by the values of the ACT slots for the moves.
Some examples of the use of this frame to represent sequences of utterances in conversations can be found in Waohtel (1985b, 1985o), including its use to identify shifts of topic, subdialogues and relevance, as well as the contextual disambiguation of speech acts, which is the main topic of these working papers.
3. The structure of conversation We assume that it is possible to define the structure of a possible conversation by rule.
Actual human-human conversations may defy such analysis, as illustrated by, for example, the work of Sachs, Schegloff & Jefferson (1974).
However, the possible ways in which the conversations we are dealing with may go are severely limited by three factors: (a) this is an interface to an expert system (or some similarly specific software), which delimits the possible range of topics; (b) one of the participants in the dialogue is a machine, which means that it will not suddenly want to indicate that, for example, Albert's niece is a friend from school, but this fact has no bearing on the supportive things being said about her; and (o) the other participant knows that his interlocutor is a machine, and will behave accordingly.
Therefore, what we need to model is not a typically natural open human conversation, but a restricted type of conversation that also occurs between humans in certain well-circumscribed contexts.
For example, a conversation between a would-be passenger and a ticket clerk at a railway station is closer to what we need to model, and in such oases it is possible to define what is or is not a well-formed conversation by rules of an abstract nature that may well be inadequate for other naturally occurring converations.
We therefore propose three rules that define the notion of well-formed conversation in the present context, making the following assumptions.
The structure of a conversation can be represented as a tree structure.
The wellformedness of such trees can be defined by rewrite rules.
The maximal number of levels of embedding in such trees is six (see below).
In particular, subdialogues can be embedded within dialogues, but there can be no embedding within subdialogues.
The last restriction conflicts with what people do.
It is one of the restrictions we consider necessary, and which can be handled in such a way that the user will not notice 36 that any such restriction exists.
We assume that the following four categories are sufficient for the representation of the structure of conversation.
The symbols used serve as mnemonics for their approximate counterparts in English, but they should not be strictly equated with them: CONV (conversation), DIAL (dialogue), EXCH (exchange) and MOVE (as discussed above).
To formulate in informal terms the general style and atmosphere of the rules that we will propose more formally below, let us say that a CONV may consist of one or more DIALs, a DIAL may consist of one or more EXCHs, and an EXCH consists of two MOVEs, with each of these MOVEs followed by an optional DIAL.
A major point about conversations that must be handled in a grammar of this type is the fact that although MOVEs are the only terminal nodes, and are therefore the nodes that correspond to the utterances that are actually produced, with all other nodes representing more abstract elements, certain features of conversation need to be associated with these abstract nodes.
For example, although each MOVE is specified for who the current user of the system is and each MOVE also has a particular topic, as discussed above, these notions properly belong to more abstract levels of conversational structure.
Who the user is can be defined at the CONV level (i.e.
we define a CONV as a conversation with one user).
The topic of an utterance can be defined at the DIAL level (i.e.
a CONV can consist of one or more dialogues, each on a single topic).
Furthermore, a DIAL can consist of one or more EXCHs, and it is at this point that the content of the utterances that form part of that EXCH is defined.
Let us now be more precise.
We assume that some of the slots mentioned above in the MOVE frame are represented as features on the nodes in the trees representing the structure of the conversation of which the moves described by the MOVE frames are part.
This association of features with nodes, plus the assumption that all features trickle down, with a few exceptions discussed below, provides for trees of the general form shown in Table i.
The lower case letters are constants.
Note that the values of the BASE feature on the subdialogue nodes have not been specified.
We return to this point below.
Table I represents a goal: the sort of structures we want the rules to produce.
The following three rules generate trees of this type.
Kleene Plus notation is used.
The notation should be interpreted as follows.
Roman letters as feature values are constants.
Greek letters are variables ranging over possible feature values, and are to be interpreted consistently within a rule~ but not necessarily between rules.
They are used to ensure that the correct MOVE F:il ASE : b ONT : URN : Table I I D IAL ASlE:_J I EXCIt SE~ it\] ASE \[ \[ DIAL B SER EXCH ASE :b ON~ : CONV 1 EXCH ASE : \] ONe:,~1 \] MOVE MOVE MOVE MOVE asE:l I nAsE: I nasE: I BASE: l I ~ASE:I I BASE O~T:S I ICOm~: ICO~'r: ICOm'-m I ICOm~:q ICOm' r DIAL A~E : EXCH ~ s~..
~\] ASE : | kCO~r : nS MOVE MOVE HOVE \[BASE : \[CONT: \[~URN : DIAL UBSER : AsIE: ~ EXCIt SER:iN ASH : ONLY: F......
MOVE MOVE ASE:Pl pASE: o~T.~ I Ices,: \[TURN:o_\] \[jUURN: CONV 3 EXC}~ BASE:~ / co~T:~ / 2 -~ DJ:AI.,d+ DI~L d .--) EXCHj L ABE :b \[ pass: BASl!: :?\[ ~D:\] ~u~D : suBD: r I _ . ~om:o d --> MOVE n\[ BASE : ~ | ICON'.e: 6 | \[~ul~N : OeE~J <(DIALd)> MOVE n ((DIALdd I) \[~URN : CLOSI? feature values triokle down in the right oases.
Node subsoripts distinguish between different instanoe~ of the same node.
Note that Greek letters are also used a~ variables for node subsoripts (rule (3)).
Round braoket~ indioa~e optionality in the usual way.
Angle braokets (rule (3)) are used in the same way as used by e.g.
Labor (1972: oh.
8) in the study of ~ooiolinguistio variation.
They indioate a relationship between elements on the left and on the right of the rule.
The expansion on the ~ight is only possible if the feature on the l~!ft of the rule has the value speoified, if both are enalosed in angle brackets.
In the present ease, they are used to prevent the expansion ~f a subdialegue as a further subdialogue.
The feature ESUBD=-3 is introduoed by the rule that expands CONV.
The rule e;¢panding DIAL oopies this feature with this value.
The rule expanding EXCH allows an expansion of EXCH tQ include (optionally) one or two DIALs, but if the DIALs appear, then they oarry the feature \[SUBD:+\].
The expansion of such a DIAL by rule (2) oopies this feature with this value, as before, when the DIAL is expanded to one or more EXCHs.
However, sinoe the EXCHs so generat, ed oarry the feature \[GUBD:+3, the rule that expands EXCH will not allow the possibility of further DIALs, beoause any suoh e~pansion is oonditional upon the EXCH having the feature \[SUBD:-3, as speoified in rule (3).
The value oi the fe~ture TURN is either OPEN or CLOSE plus a oonstant that refers to the relevant EXCH.
Note the use of the 6reek 37 Table 2 ' I MOVE I \] SER: Max | I~ SE: IJCAI | ~SER: Max NT: CI | IBASE: EXCH RN: OPEN I ~UBD: + ENT:USER | I T: REQCONST~ I ' EXCH 2 ~SER: Max q |SUBD: LC_0NT: C2 _J /___ f \] MOVE 2 OVE: 2 SER: Max ASE: EXCH I ONT: C2 URN: OPEN 2 GENT:SYSTEM T~QCON~ CONV I ~SER: Max~ f DIAL I \] ASE : IJCA_~ UBD : f EXCH I FSE~: Max q IBASE : IJCAI I ISUBD : CmONT: cI 3 l J MOVE 6 IOVE : 6 q SER: Max | DIAL3 ASE: IJCAI | ~SER: Max \] ONT: CI | IBASE: EXCH URN: CLOSE I | ~SUBD: + GENT:SYSTEM | I CT : SUPPCONST~ J EXCH3 I EXCH4 FsER: Max -1 r-~ FSER, Mox \] IBASE: Excel I \[s3) lEASE: EXCH |suED: + / "~ Isu sD: + ~ONT \[ c3 __1 ......
LC0NT i C4 I I I I __ __ MOVE 3 __ __ MOVE 4 _ __ MOVE 5 __ MOVE 7 __ __ MOVE 8 ussa: Max I USER: Max lUSER: Max //USER: Max \]/US~R: Max | BASE: EXCH 1 I BASE: EXCU 1 lEASE: EXCH 1 //BASE: EXCH ~ //EASE: EXCH 1 | CONT: C2 I CONT: C3 /CONT: C3 //CONT: C4 ' TURN: CSOSE 2 / TURN: OPEN 3 /TURN: CLOSE 3 / /TURN: OPEN 4 / /c°NT: / C4 / /TURN: CLOSE 4 / /AGENT:USER / IAGENT:SYSTEM /AGENT: USER / F GENT:usER / / AGENT=SYSTEM / variable.
The same constant is used as the value of the feature BASE in subdialogues.
What this amounts to is a stipulation that the topic of a subdialogue is the EXCH that it is part of, which seems to be about right intuitively.
This is what makes them metalinguistio in character.
Furthermore, note that this is a case where a feature/value pair does not trickle down.
This is tantamount to stipulating that DIAL is a BASE-bounding node: it creates "islands" with BASEs that do not extend upwards to the main dialogue, but without overwriting the BASE of the current main dialogue.
Again, this seems intuitively correct.
Let us now provide a concrete example of the structure that these rules assign to a dialogue such as (4).
38 4 Ui When is the next JICAI meeting?
Si I presume you mean "IJCAI" U2 Yes B2 Do you mean the next conference or the next conveners' meeting?
U3 Conference $3 12 August U4 19857 $4 Yes The structure ie given as Table 2.
The values for the feature CONT are given as constants rather than as full semantic representations, and the constants rather than as full semantic representations, and the constant IJCAI is used for the BASE, which is the actual conference due to take place on 12 August 1985.
This value has been given in all relevant oases, thus glossing over the fact that the BASE could not be identified immediately, which is what triggeeed the subdialogues.
We add, however, neetain features that wece discussed earliee, such as MOVE, AGENT and ACT, to olaeify how the final focm of the frame eepresenting each MOVE is deeived.
This is a oonveesation in which there is only oFie main dialogue arid only one maid exchange within that dialogue.
I hope that it is clear how these additional elements would be incoeporated into the structure, and how the appropriate values foc BASE, CON? and SUBD would be iaaintained or changed.
It is inteeesting to note that the nodes iri conveesation trees of this sect have a conceptual validityl in that dJ.~feceet node types (Jo~'eespond to diffeeent aspects of a ~enve~°satierio Thus a CONY node eoc~'esponds to "this (Iollve~'sation with this usec", a DIAL \[:SUBD :-3 node eoccespends to "this topic"~ an EXCH \[SUBD: --3 node corresponds to "this point" ~ a DIAl \[BUBD ~-~'\] node eoreesponds to "a point that needed olai'ifieation", arld an EXCH ESUBD:÷\] iiede ooe~;'espends to "what was unuleac", Each HOVE ill\]de 12eprl~sel\]t5 ~311 uttee~Jiil\]e, (11 > \[~oLll,~e.
The seA; of HOVE nodes dominated by EXC'.H \[UI.IBO:"LI eoreespends to "what was said; t',he gelrf~l,a! l iln-~ of the OCilVecsation", alld tile set ot HOVE nodes dol,iiriated by EXCFI \['31l\[)1):+3 corresponds t(i "the !iubdialogees".
t.J. kewiso~ £H~'I; ~1 \[if tit tic>r il o d (,~ ~ ClOl2ices pontl i;o o51iel? hclladec ~lollients el 6~ OCliVe~'satiorl= The set 07 C()NV nod(.~>s oor'~'eilds ttl "all the di\]ltJ~-erlt ~lerivi!IcfJ~\];ierl~ )\[ licit ill thi~,~ se%sioll with d.i.~t~rerit tlsol,'s", the set ill 1)i~%1.
\[BUBD.'-'J 7iod-#~5 (ltl!.
eR~pondt; to "tli~! to~\] il:;f7 (i(.iv()l~ed,i i tli~,~ set of F;XCH FBUBD'-\] ned~:q~ ~ei:,i.,espsnd+~ tu "the lJoin~s discussed", and +Je mi.
By takin(t J.
ntn account oenf iUu~'ai, iolts o~ I eatue~ ~It liodes ~ one oaii isolate, th~:~'efo~e, such elements a~ "the last but cne topi¢~ discussed by tl~o previous user" or "the fleet point i~i this ooeve~'saticm that needed olaril ilation".
Let us now turn to two e)(tensions o~ the above system~ hypebhetieal moves arid anticipatocy moves, ~'equired by certain dialogue phenomena.
4. Hypothetical moves "rheee are appaeently innocuous COilVepsatiens suoh as (5) which may cause ti~oob i e on formal grounds.
U: Can you print the minutes Of the last meeting?
S: Yes.
Do you want to see them?
U: Yes S: (p~ints) This is a five-move conversation (the system's "Yes" counts as a sepacate move).
The g~ammac would assign the steuotuee shown informally as (6) to the first four moves.
MOVE ii USER~ OPEN 1, REQAFF MOVE 2: SYS'FEM, CLOSE i, SUPPAFF MOVE 3: SYSTEM, OPEN 2, REQAFF MOVE 4: USER, CLOSE 2, SUPPAFF On formal grounds, the oonversation is closed after the fourth.move (U: Yes), with all OPENed moves having been CLOSEd.
What, then, trigger's the system's printing of the eequieed text (MOVE 5) ~ and what happens after that, Since an odd numbec of moves ~annot constitute a well-formed conversation aeoecding to the grammar peesented above?
It is oleae that it is the meaning of MOVE 3 that is the key.
To handle this fo~mally, we pcopose the use of the notion of "hypothetical move" and the cepresentation speech aot.~ net as atomic elements Hilt as struotuces.
Thus we wi I \] ue present a supp I y -o~-a~ f i~mation in response to o ceqoest-loc--af~irmation as SUPPAFF(REgAFF)o A hypothetiual move is a move that does not a~tually oeeur ilr the oeilversation $ but which the ~iystem oosstcuuts on lille basis o~ very specific clues, and whic:h allow it to (~ontinue the eo~iw.~rsat ion appcopi~ia~ie i y ° They ooz, cespeYid in some way to a ~q~pcesentation c~ Geiee'~ (19/5) llotien o~ implioature.
Foe,E,~xample~ a more detailed analysis o:~ (5) reveals that (6) omits several important details.
Tile first iilOVE! is abtual ly alailigtAous betwei:)n a ~'equost-:focaffirmation and a ceqoe!~t-foz'-acM~ioli~ What we would like) the systelii to do is te supp).y bbe a f f il'iilatiori te the r'equest-~ f or,-~ allil~'mati(3n part,j arid to retlu~st alfiPiliation conct~cilifig the eequest--lel.-:aetion pact.
Th~ important point is that a p\[<epeP analy.qiB of "Oo you ~#ant to see the!m"? should r'epPesent the J\[aet tl'iat this is response to the potential ~'equest.f or~aotion int, ez'p\['et at ion of "Can you print the minutes of the last meeting?"0 The upshot of tliis is that a more pL~ecise ~ep~'eseritation of the ~i\['st lout moves ef (5) is (7), cathez' than (6),.
MOVE i: U, ()PEN i, REQAFF/REQACT HOVE 2: S, CLOSE i~ ~UPPAFF(REQAFF) MOVE 3: B, OPEN 21 REQAFF(REQACT) MOVE 4: U, CLOSE 2~ SUPPAFF(RESAFF(~E@ACT) We new have a way of amcountillg fo~ the system' s eext more (pminting), and fec explaining why anything at all happens.
MOVE 4 is a SUPPAFF'(REQAFF(REQACT)), i.e° a supply of affirmation in response to a request foc affirmation in response to a request foe aotion.
It seems quite gloat intuitively that this complex structure is equivalent "to a REQACT, and we propose that this type of reduction should take place by rule.
39 However, this rule must not over-write the original interpretation of the illooutionacy force of the move, which must be retained foc the dialogue to be well-formed with respect to the grammar.
We propose that the e~feot of this type of rule (an implioature redundancy rule) is t~ create a hypothetical move immediately following it of the appropriate type.
Its effect is to alter the structure of the conversation in exactly the same way as if the user (in this case) had actually uttered something like "I request you to p~int the minutes now", except for the fact that it is noted that this is a hypothetical move.
We now have a formal entity that can trigger the printino of the required text, since this is a CLOSure of the hypothetical move.
If no printing took place, then the dialogue would be illformed, since it would contain one OPEN that had not been CLOSEd.
This, the system is behaving as if the use~ had made a particular move that did not actually occur.
(The notion 'as if' is central to Vaihinger's (1935) theory of fictions= It is al~o cruoial to 6rioean implicature).
The result is that (4) is now analysed as a six-move dialogue, with the structure shown a~ (8).
MOVE i: U, OPEN I, REQAFFIREQACT MOVE 2: S, CLOSE I, SUPPAFF(REQAFF) HOVE 3: S, OPEN 2, REQAFF(RE~ACT) MOVE 4: U, CLOSE 2, SUPPAFF(REQAFF(REQACT)) MOVE 5: U, OPEN 3, RE~ACT, hypothetical HOVE &: S, CLOSE 3, ACTION 5.
Anticipatory moves Another type of ir=ealis move is an anticipatory move, where on the basis of specific clues the system anticipates what the user's next move will be.
The difference between these and hypothetical moves is that no action is taken by the system until there has been a reaction from the user that either confirms or disoonfirms the correctness of the move that has been anticipated.
The use of such moves will be of assistance in the interpretation of cryptic follow-.ups, as in (9).
u: Can you provide progress reports on LOKI subprojeots?
S: Yes.
Do you want to see them?
U: LOKA S: (prints) The user's second utterance must be interpreted as a request-for-action, which is difficult on formal grounds.
Without going into too much detail, we propose that in such oases ths system should have formulated an anticipation of a following 40 request~for-action before the user'~ next utterance.
\]'his could either be an e;¢plicit request=for-action ("Please print the LOKA progress report"), or ~imply "Yes" (i.e.
a SUPPAFF(REQAFF(REgACT))), which would trigger a system request for clarification, perhaps, or anything else at all tha~ can serve to identify the BASE of the anticipated request-for-aCtion.
This is the important point about the anticipatien~ Anything.
at all that can fill in the unspecified ~Iots in the BASE of the anticipated request-for-action will confirm that this utterance is intended as a REQACT.
For this reason~ the bare name LOKA i~ enough to get the report printed.
Any other sufficiently identifying description of the relevant subprcjeot would have achieved the same, such as any of the following <as appropriate): the one based in Hamburg, Hamburg, NL, Max'~ projeot~ most ceeent~ etc.
6. Conclusions The processes and formalisms outlined above are all tentative in nature, and represent part of an approach to the problem of pragmatic sensitivity, rather than purported solutions to the problem.
We envisage then as being part of a system that uses a multi-level parsing technique, with mutual assistance between different subcomponents of the parser, so that pragmatic information can immediately be used to assist par~ing i for syntax, and so on.
We also see that par~ing will involve not only ~entence parsing, but also conversation parsing, in that the appropriate structure of a conversation must be built up at each step.
This is simply one further part of the general parsing process~ but one that we envisage as being of assistance to other parser suboomponents, as well as fulfilling its primary function of making sure that the system is something of a conversationalist, rather than just being a communicative plodder.
REFERENCES Cole, P.
& J.
L, Morgan (eds).
1975. Syntax & Semantios~ volume 3: Speeoh aots.
New Yock= Aoademio Press Findle~ N.
V. (ed).
1979. Assooiative networks: representation and use of knowledge by oomputers".
New York: Aoademio Press Given, To (#d).
1979. SyntaH & Semantios~ volume 12: Oisoeuvse and syntax.
New York: Aoademio Pcess Gcioe, H.
P. 1975 "Loglo and oonversation" In: Cole & Reagan (eds.), 1979,~41-58 Hobbs, 3.
R. 1982.
"TowacdB an understanding el ooherenoe in disoouvse".
In: Lehnert & Ringle (eds.), 1982, 223-243 Labov~ N.
I772o Sooiolin~uistlo patterns.
Philadelphia: University of Pennsylvania Press Lehne='t~ |~.
& M.
H. Ringle (ed=).
1982. Strategies foF natural language prooessing.
London= Erlbaum MoKeown, I(.
R. 1985.
"Discourse strategies for generating natural-language text".
In: Artifioial Zntelligenoe~27~ I-/,I Vaihinger, H.
1935. The philosophy of 'As if' -a system of the theoretioal~ praotioal and religious fiotions of mankind.
London: Routledge & Kegan Paul Waohtel~ T.
1985a. "Disoourse stcuotuce".
LOKI Report NLI-I.I~ University of Hamburg Waohtel~ T.
1985b. "Guided speeoh aot assignment in 'oan you' utteranoes" Unpublished LOKI working paper TW-II, University of Hamburg Waohtel~ T.
1985o. "Contextual faotocs in speeoh aot assignment".
Unpublished LOKI working paper TW-13, University of Hamburg

