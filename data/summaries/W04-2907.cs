We can apply to Ai a general weightpushing algorithm in the log semiring (Mohri, 1997) which converts these weights into the desired (negative log of) posterior probabilities.
J97-2003
